# Cursor Rules — Nutrition App

## Quick Context

This is a nutrition tracking app built with Next.js 14, Supabase, and Anthropic AI. It's one capture surface in a larger product suite (Understood). The builder is an ENTJ with strong numerical aptitudes and specific cognitive patterns the agent should accommodate.

**Read the detailed docs in `.cursor/rules/` before starting work:**

| File | When to Reference |
|------|-------------------|
| `GUIDELINES.mdc` | Decision-making, priorities, philosophy |
| `CONVENTIONS.mdc` | Code patterns, naming, technical standards |
| `BUILDER_PROFILE.mdc` | Communication style, blindspots, how to help |
| `PRODUCT_CONTEXT.mdc` | Customer, business intent, feature evaluation |

---

## Core Principles (Summary)

### Decision Priority Stack
1. **Leverage** — Does this amplify pattern recognition into customer value?
2. **Automation** — Does this save the user time/energy per transaction?
3. **Lift** — Does this make users better off immediately?

*If #1 doesn't decide, reframe the question.*

### Variable Composition Principle
Every feature should support multiple focal lengths:
- **Tight:** "What happened today with this one thing?"
- **Wide:** "Where does this sit in the 30-day pattern?"
- **Movement:** Easy transition between views

### The Bitter Lesson
Favor computation over hand-crafted rules. Build systems that scale with better AI models, not brittle special-case logic.

---

## Builder Profile (Summary)

**Cognitive Style:**
- ENTJ: Strategic, future-focused, big-picture
- Strong: Numerical reasoning (75th), number facility (85th), graphoria (70th)
- Weak: Analytical reasoning (13th), structural visualization (5th), number memory (5th)

**Agent Should:**
- Provide structure and sequential plans proactively
- Add error handling without being asked
- Reference specific numbers (don't assume recall)
- Make recommendations, not just list options
- Use flow/sequence metaphors, not 3D/spatial ones
- Be concise; details on request

**Agent Should Not:**
- Over-explain fundamentals
- Ask permission for clear requests
- Present options without a recommendation
- Require reviewing old code or conversation

---

## Tech Stack

- **Frontend:** Next.js 14 (App Router), Tailwind CSS, Lucide icons
- **Backend:** Supabase (Auth + Postgres)
- **AI:** Anthropic SDK (claude-sonnet-4-20250514)
- **Deployment:** Vercel (nutrition-app-bay.vercel.app)

---

## Code Conventions (Summary)

- **Server Components by default** — Only `'use client'` when needed
- **Tables:** snake_case, plural (`food_entries`)
- **Components:** PascalCase (`CalorieRing.tsx`)
- **Always enable RLS** on Supabase tables
- **Error handling:** Surface to user, log with context, fail gracefully
- **No hardcoded personal data** — Build for eventual commercial use

---

## Workflow Rules

1. **Do only what's requested** — No unrequested features
2. **Ship working code fast** — Polish after validating
3. **Pause after major changes** — Summarize what was done, confirm before continuing
4. **Ask rather than guess** — When requirements are unclear
5. **Make recommendations** — Don't just present options

---

## When Evaluating Features

Ask in order:
1. Does this win on Leverage? (If not, what does?)
2. Does this support Variable Composition?
3. Does this scale with better AI models?
4. Does this reduce friction or add it?
5. Does this serve the suite or just this app?

---

## Quality Bar

A feature is complete when:
- Works for the primary use case
- Handles errors gracefully (not silently)
- Looks and feels intentional (Taste matters)
- Doesn't create blocking technical debt
- Supports zoom/pan where relevant
